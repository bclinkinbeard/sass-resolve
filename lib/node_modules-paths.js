'use strict';

var path = require('path');

module.exports = function nodeModulesPaths (start) {
  var splitRe = process.platform === 'win32' ? /[\/\\]/ : /\/+/;
  var parts = start.split(splitRe);

  var dirs = [];
  for (var i = parts.length - 1; i >= 0; i--) {
    if (parts[i] === 'node_modules') continue;
    var dir = path.join(
      path.join.apply(path, parts.slice(0, i + 1)),
      'node_modules'
    );
    if (!parts[0].match(/([A-Za-z]:)/)) {
      dir = '/' + dir;
    }
    dirs.push(dir);
  }
  return dirs;
}
